# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.7.0] - 2026-01-19

### Changed

- **TYPES-REF-002**: Implemented discriminated unions for all response types using `success: true` / `success: false` literal types for proper TypeScript type narrowing
  - `AuthResponse`, `RefreshResponse`, `UserInfoResponse` - Auth module responses
  - `APIResponse<T>` - Generic API wrapper
  - `PresetSubmitResponse`, `PresetEditResponse`, `VoteResponse`, `ModerationResponse` - Preset module responses
  - Consumers now get full type safety with `if (response.success)` narrowing

---

## [1.6.0] - 2026-01-17

### Added

- **OKLAB Color Type**: Modern perceptually uniform color space (Bj√∂rn Ottosson, 2020)
  - `L`: Perceived lightness (0 to 1)
  - `a`: Green-Red axis (approximately -0.4 to 0.4)
  - `b`: Blue-Yellow axis (approximately -0.4 to 0.4)
  - Fixes CIELAB's blue color distortion for better color mixing

- **OKLCH Color Type**: Cylindrical form of OKLAB
  - `L`: Perceived lightness (0 to 1)
  - `C`: Chroma - colorfulness (0 to ~0.4)
  - `h`: Hue angle (0-360 degrees)
  - Ideal for gradient interpolation and hue-based operations

- **LCH Color Type**: Cylindrical form of CIE LAB
  - `L`: Lightness (0-100)
  - `C`: Chroma - colorfulness (0 to ~150)
  - `h`: Hue angle (0-360 degrees)
  - Useful for hue-based interpolation with direction control

- **HSL Color Type**: Hue-Saturation-Lightness
  - `h`: Hue (0-360 degrees)
  - `s`: Saturation (0-100 percent)
  - `l`: Lightness (0-100 percent)
  - Common in design tools (Photoshop, Figma, CSS)

---

## [1.5.0] - 2026-01-11

### Added

- **Market Listing Source**: Added world identification fields to `PriceData` interface
  - `worldId?: number` - World ID where the minimum price listing is from (Universalis worldId)
  - `worldName?: string` - World name where the minimum price listing is from
  - Enables displaying which specific world has the cheapest listing when fetching data center prices
  - Can be mapped to world name using worlds.json data

---

## [1.4.0] - 2026-01-11

### Added

- **LAB Color Type**: New `LAB` interface for CIE LAB perceptually uniform color space
  - `L`: Lightness (0-100)
  - `a`: Green-Red axis (approximately -128 to 127)
  - `b`: Blue-Yellow axis (approximately -128 to 127)
  - Enables DeltaE color difference calculations in `@xivdyetools/core`
  - Used for perceptually accurate color matching in harmony generation

---

## [1.3.0] - 2026-01-08

### Added

- **Character Color Types**: New `@xivdyetools/types/character` module for FFXIV character customization colors
  - `CharacterColor` interface: Represents a single color option in the character creator
  - `CharacterColorMatch` interface: Result from matching a character color to dyes
  - `SubRace` type: All 16 playable subraces (Midlander, Highlander, Wildwood, etc.)
  - `Gender` type: Character gender options ('Male' | 'Female')
  - `Race` type: All 8 playable races
  - `SharedColorCategory` / `RaceSpecificColorCategory` types for color palette categories
  - `RACE_SUBRACES` constant: Mapping of races to their subraces
  - `SUBRACE_TO_RACE` constant: Mapping of subraces to parent race
  - `COLOR_GRID_DIMENSIONS` constant: Grid dimensions for color palettes

---

## [1.2.0] - 2026-01-08

### Added

- **StainID Field**: Added `stainID: number | null` field to the `Dye` interface
  - Contains the game's internal stain table ID (1-125) from Stain.exh
  - Value is `null` for Facewear dyes which don't have stain table entries
  - Enables lookup by game data stain ID for integration with other tools

---

## [1.1.1] - 2025-12-24

### Documentation

- **TYPES-101**: Added documentation about branded types runtime validation limitation
  - Clarified that TypeScript cannot enforce use of `create*` helper functions
  - Added best practices guidance to avoid bypassing validation with type assertions
  - Updated module header in `src/color/branded.ts`

- **TYPES-103**: Added documentation about Dye field presence guarantee
  - Clarified all Dye interface fields are required and non-nullable
  - Added guidance for consumers about safe field access
  - Updated module header in `src/dye/dye.ts`

---

## [1.1.0] - 2025-12-24

### Added

- **TYPES-102**: Extended `createDyeId` to support synthetic Facewear dye IDs
  - Regular FFXIV dye IDs (1-200) continue to be supported
  - Synthetic IDs (<= -1000) are now accepted for Facewear dyes
  - Synthetic IDs are generated by DyeDatabase for Facewear dyes lacking real itemIDs
  - Updated documentation to explain the ID ranges

### Changed

- Updated `DyeId` type documentation to clarify valid ID ranges:
  - Regular dyes: 1-200
  - Synthetic Facewear dyes: negative numbers <= -1000

---

## [1.0.0] - 2025-12-14

### Added

- Initial release of `@xivdyetools/types`
- Core color types: `RGB`, `HSV`, `OKLCH`, `LAB`
- Branded types for type safety:
  - `HexColor` with `createHexColor()` validator
  - `DyeId` with `createDyeId()` validator
  - `Hue` with `createHue()` normalizer
  - `Saturation` with `createSaturation()` clamper
  - `Brightness` with `createBrightness()` clamper
  - `Lightness` with `createLightness()` clamper
- Dye-related types:
  - `Dye` interface with comprehensive dye data
  - `DyeCategory` union type
  - `LocalizedDye` for multi-language support
- Preset types:
  - `Preset` and `PresetDye` interfaces
  - `GearSlot` union type
- Authentication types:
  - `User` and `AuthToken` interfaces
  - OAuth-related types
- API types:
  - `PriceData` and `MarketBoardData`
  - Request/response types for various endpoints
- Error types:
  - `AppError` class with error codes
  - `ErrorCode` union type
- Localization types:
  - `Locale` union type
  - Translation interfaces
